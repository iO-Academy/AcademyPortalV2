<?php
/**
 * @var $applicant \Portal\Entities\Applicant
 * @var $previousPage int
 * @var $nextPage int
 * @var $pageCount int
 * @var $currentPage int
 */

$application = $applicant->getApplication();
?>
<!DOCTYPE html>
<html>
<head>
    <?php
    require 'partials/layout/head.phtml';
    ?>
    <title>Applicant - <?= $applicant->getName(); ?></title>
</head>
<body>
<?php require 'partials/layout/header.phtml'; ?>
<?php require 'partials/layout/nav.phtml'; ?>
<main>
    <div class="container">

        <form method="post" action="/admin/applicants/edit/<?= $applicant->getId()?>">
            <h2>Personal Information</h2>
            <div class="form-group">
                <label for="name">Name</label>
                <input id="name" name="name" value="<?= $applicant->getName() ?>">
                <label for="dob">D.O.B</label>
                <input type="date" id="dob" name="dob" value="<?= $application->getDob() ?>">
                <label for="address">Address</label>
                <input id="address" name="address" value="<?= $application->getAddress() ?>">
                <label for="email">Email</label>
                <input type="email" id="email" name="email" value="<?= $applicant->getEmail() ?>">
                <label for="phone">Phone</label>
                <input id="phone" name="phone"
                       value="<?php if ($application): ?><?= $application->getPhone() ?><?php else: ?>No phone number<?php endif; ?>">
                <section class="appInfo">
            </div>
            <h2>Application Info</h2>
            <div class="applicationInfo">
                <div class="form-group">

                    <label for="cohort_id">Cohort start date</label>
                    <select name="cohort_id" id="cohort_id">
                        <?php
                        foreach ($cohorts as $cohort) {
                            if ($cohort['date'] == $application->getCohort()) {
                                $selected = 'selected';
                                echo $selected;
                            } else {
                                $selected = "";
                            }
                            echo "<option value='{$cohort['id']}' {$selected}>{$cohort['date']}</option>";
                        };
                        ?>
                    </select>

                    <label for="why">Application Reason</label>
                    <input id="why" name="why" value="<?= $application->getWhy() ?>">

                    <label for="circumstance">Circumstance</label>
                    <select name="circumstance_id" id="circumstance">
                        <?php
                        foreach ($circumstances as $circumstance) {
                            if ($circumstance['option'] == $application->getCircumstance()) {
                                $selected = 'selected';
                                echo $selected;
                            } else {
                                $selected = "";
                            }
                            echo "<option value='{$circumstance['id']}' {$selected}>{$circumstance['option']}</option>";
                        };
                        ?>
                    </select>

                    <label for="experience">Code experience</label>
                    <input id="experience" name="experience" value="<?= $application->getExperience() ?>">

                    <label for="heard_about">Heard about us from</label>
                    <select name="heard_about_id" id="heard_about">
                        <?php
                        foreach ($hearAboutUs as $hear) {
                            if ($hear['option'] == $application->getHearAbout()) {
                                $selected = 'selected';
                                echo $selected;
                            } else {
                                $selected = "";
                            }
                            echo "<option value='{$hear['id']}' {$selected}>{$hear['option']}</option>";
                        };
                        ?>
                    </select>
                    <label for="fundingOptions">Funding Options</label>
                    <select name="funding_id" id="fundingOptions">
                        <?php
                        foreach ($fundingOptions as $fundingOption) {
                            if ($fundingOption['option'] == $application->getFunding()) {
                                $selected = 'selected';
                                echo $selected;
                            } else {
                                $selected = "";
                            }
                            echo "<option value='{$fundingOption['id']}' {$selected}>{$fundingOption['option']}</option>";
                        };
                        ?>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <Label for="terms">Agreed to terms</Label>
                <div class="width-20">
                    <input id="terms" name="terms" type="checkbox"
                           value='1' <?php if ($application->getTerms()) echo "checked" ?>>
                </div>
            </div>

            <div class="form-group">
                <Label for="diversitech">Diversitech Qualification</Label>
                <div class="width-20">
                    <input id="diversitech" name="diversitech" type="checkbox"
                           value='1' <?php if ($application->getDiversitech()) echo "checked" ?>>
                </div>
            </div>
            <div class="form-group">
                <Label for="ageConfirmation">Over 18</Label>
                <div class="width-20">
                    <input id="ageConfirmation" name="age_confirmation" type="checkbox"
                           value='1' <?php if ($application->getAgeConfirmation()) echo "checked" ?>>
                </div>
            </div>
            <div class="form-group">
                <Label for="newsletter">Newsletter signup</Label>
                <div class="width-20">
                    <input id="newsletter" name="newsletter" type="checkbox"
                           value='1' <?php if ($application->getNewsletter()) echo "checked" ?>>
                </div>
            </div>
            <div class="form-group">
                <Label for="eligible">Eligible to work in UK</Label>
                <div class="width-20">
                    <input id="eligible" name="eligible" type="checkbox"
                           value='1' <?php if ($application->getEligible()) echo "checked" ?>>
                </div>
            </div>
            <input type="submit" value="SUBMIT">
        </form>
    </div>
</main>
</body>
</html>